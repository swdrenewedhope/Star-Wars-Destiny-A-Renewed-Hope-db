<!DOCTYPE html>
<html lang="{{ app.request.locale }}">
  <head>
    <title>Star Wars Destiny: A Renewed Hope Database</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="mobile-web-app-capable" content="yes">

    <link rel="icon" sizes="192x192" href="/icon-192.png" />
    <!--<link rel="apple-touch-icon" sizes="120x120" href="/icon-120.png" />-->
    {% if app.request.locale != "en" and app.request.attributes.get('_route') != "" %}
      {% set _route_params = app.request.attributes.get('_route_params')|default({}) %}
      {% set _get_params = app.request.query.all()|default({}) %}
      <link rel="canonical" href="{{ url(app.request.attributes.get('_route'), _route_params|merge(_get_params)|merge({'_locale': 'en'})) }}"/>
    {% endif %}
    {% if pagedescription is defined %}<meta name="description" content="{{ pagedescription }}">{% endif %}

    <link href='https://fonts.googleapis.com/css?family=Amiri:400,400i,700,700i|Open+Sans+Condensed:300|Open+Sans:400,400i,700,700i|Roboto|Abel|Josefin+Sans:wght@700' rel='stylesheet' type='text/css'>
  	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/qtip2/2.1.1/jquery.qtip.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-markdown/2.9.0/css/bootstrap-markdown.min.css">
	{% if app.request.cookies.get('lightmode') %}
	<link rel="stylesheet" id="lightmodesheet" href="/css/app.css" />
	{% else %}
    {% stylesheets filter="cssrewrite,scssphp" output="css/app.css"
      'bundles/app/css/bootstrap.css'
	  'bundles/app/css/bootstrap-essentials.css'
      'bundles/app/css/style.scss'
      'bundles/app/css/icons.css'
      'bundles/app/css/languages.css'
    %}
	<link rel="stylesheet" id="lightmodesheet" href="{{ asset_url }}" />
	{% endstylesheets %}
	{% endif %}

	<!--[if lt IE 9]>
      <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7/html5shiv.js"></script>
      <script src="//cdnjs.cloudflare.com/ajax/libs/respond.js/1.4.2/respond.js"></script>
    <![endif]-->

	{% block stylesheets %}{% endblock %}
    {% include 'AppBundle:Default:cookiesconsent.html.twig' %}
  </head>
  <body>
  <div id="wrapper">
      <nav class="navbar navbar-default navbar-static-top" role="navigation">
      <div class="container">
          {% block navbar %}
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="{{ path('index') }}">
		   <img src="/icon-192.png" height="28" style="margin-top: -6px; margin-right: 6px; display: inline;">
            <span class="icon icon-link-half-top"></span>
            <span class="icon icon-link-half-bottom"></span>
            Star Wars Destiny: ARH DB
          </a>
        </div>

        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="{{ path('decks_list') }}">{{ 'nav.mydecks' | trans}}</a></li>
            <li><a href="{{ path('collection_list') }}">{{ 'nav.mycollection' | trans}}</a></li>
            <li><a href="{{ path('decklists_list') }}">{{ 'nav.decklists' | trans}}</a></li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">{{ 'nav.cards' | trans}} <span class="caret"></span></a>
              <ul class="dropdown-menu" role="menu">
  			<li><a href="{{ path('cards_search') }}">{{ 'nav.advancedsearch' | trans }}</a></li>
 			 <li class="divider"></li>

  <li>
    <a style="font-weight:bold" href="https://swdrenewedhope.com" target="_blank">A Renewed Hope</a>
  </li>

  {% for line in cards_data.allsetsdata() %}
    {% if line['projectName'] == 'A Renewed Hope' %}
      <li><a href="{{ line['url'] }}">{{ line['label'] | raw }}</a></li>
    {% endif %}
  {% endfor %}

  <li class="divider"></li>
 
 <li>
    <a style="font-weight:bold"
       href="https://www.fantasyflightgames.com/en/products/star-wars-destiny/"
       target="_blank">Fantasy Flight Games</a>
  </li>

  {% set projectName = null %}
  {% for line in cards_data.allsetsdata() %}
    {% if line['projectName'] != 'Echoes of Destiny Archive' and line['projectName'] != 'A Renewed Hope' %}

      {% if projectName != line['projectName'] %}
        {% set projectName = line['projectName'] %}
        <li class="divider"></li>
        <li>
          <span style="font-weight:bold; padding: 3px 20px; display:block;">
            {{ projectName }}
          </span>
        </li>
      {% endif %}

      <li><a href="{{ line['url'] }}">{{ line['label'] | raw }}</a></li>

    {% endif %}
  {% endfor %}
</ul>

            </li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">{{ 'nav.rules' | trans}} <span class="caret"></span></a>
              <ul class="dropdown-menu" role="menu" style="padding-top:6px;"> 
			    <li><a style="font-weight:bold" href="https://swdrenewedhope.com" target="_blank">A Renewed Hope</a></li>
				<li class="divider"></li>
                <li><a href="https://swdrenewedhope.com/wp-content/uploads/2023/07/SWD_ARH_Rules_Reference_v1.07.01.pdf" target="_blank"><i class="fa fa-book fa-fw" aria-hidden="true"></i>Rules</a></li>
                <li><a href="https://drive.google.com/file/d/1ECPQXiiONd6zMMCeMKePa6kRvRXKXWd2/view?usp=drive_link" target="_blank"><i class="fa fa-book fa-fw" aria-hidden="true"></i>Holocron [Standard]</a></li>
                <li class="divider"></li>
			  </ul>
            </li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li class="dropdown hidden-xs hidden-lg">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><span class="fa fa-search"></span></a>
                <div class="dropdown-menu">
                  <form action="{{ path('cards_find') }}" target="_blank">
                    <input type="text" placeholder="{{ 'nav.cardsearch' | trans }}" class="form-control" name="q">
                  </form>
              </div>
            </li>
            <li id="login">
                <a href="#" class="disabled"><span class="fa fa-user"></span></a>
            </li>
			{% if app.request.cookies.get('lightmode') %}
			<li id="lightmodetoggle">
    i            <a id="lightmode" href="#" class="disabled"><span class="fa fa-moon-o"></span></a>
            </li>
			{% else %}
			<li id="lightmodetoggle">
                <a id="lightmode" href="#" class="disabled"><span class="fa fa-moon-o"></span></a>
            </li>
			{% endif %}
          </ul>
          <form class="navbar-form navbar-right visible-lg-block visible-xs-block external" action="{{ path('cards_find') }}" target="_blank">
            <div class="form-group">
              <input type="text" placeholder="{{ 'nav.cardsearch' | trans }}" class="form-control" name="q">
            </div>
          </form>
        </div><!--/.navbar-collapse -->
        {% endblock %}
      </div>
    </nav>

{% block body %}{% endblock %}
    </div>
    <div id="push"></div>
  </div>
  <footer class="hidden-print">
    <div class="container">
    {% block footer %}
      {% include 'AppBundle::footer.html.twig' %}
    {% endblock %}

    </div>
    </footer>
    {% include 'AppBundle:Modale:card.html.twig' %}

    <script src="{{ asset('/bundles/fosjsrouting/js/router.js') }}"></script>
	<script src="{{ path('fos_js_routing_js', {"callback": "fos.Router.setData"}) }}"></script>	
    {% javascripts
        'bundles/bazingajstranslation/js/translator.min.js'
        'js/translations/config.js'
        'js/translations/*/*.js' %}
        <script src="{{ asset_url }}"></script>
    {% endjavascripts %}

    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <script src="//cdn.jsdelivr.net/lodash/4.13.1/lodash.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/qtip2/2.1.1/jquery.qtip.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/typeahead.js/0.10.4/typeahead.jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/marked/0.3.5/marked.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery.textcomplete/0.2.2/jquery.textcomplete.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.10.6/moment-with-locales.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highcharts/4.1.7/highcharts.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highcharts/4.1.7/highcharts-more.js"></script>
    <script src="//code.highcharts.com/4.1.7/modules/data.js"></script>
    <script src="//code.highcharts.com/4.1.7/modules/drilldown.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/bootstrap-markdown/2.9.0/js/bootstrap-markdown.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.3.0/handlebars.runtime.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/async/2.5.0/async.min.js"></script>
    {% javascripts 
      '@AppBundle/Resources/public/js/bootstrap-markdown.es.js'
      '@AppBundle/Resources/public/js/handlebars-helpers.js' %}
        <script src="{{ asset_url }}"></script>
    {% endjavascripts %}

    <script type="text/javascript">
	  var app = {
      locale: '{{ app.request.locale }}'
    };
    moment.locale('{{ app.request.locale }}{% if app.request.locale == 'zh' %}-cn{% endif %}');
    $(function() {
      {% for flashMessage in app.session.flashbag.get('notice') %}
      	app.ui.insert_alert_message('success', {{ flashMessage|json_encode|raw }});
      {% endfor %}
      {% for flashMessage in app.session.flashbag.get('warning') %}
      	app.ui.insert_alert_message('warning', {{ flashMessage|json_encode|raw }});
      {% endfor %}
      {% for flashMessage in app.session.flashbag.get('error') %}
      	app.ui.insert_alert_message('danger', {{ flashMessage|json_encode|raw }});
      {% endfor %}
	  });
    </script>

	{% if app.environment == 'prod' %}
		<!-- Global site tag (gtag.js) - Google Analytics -->
		<script async src="https://www.googletagmanager.com/gtag/js?id=G-NNEPT3FZNL"></script>
		<script>
		  window.dataLayer = window.dataLayer || [];
		  function gtag(){dataLayer.push(arguments);}
		  gtag('js', new Date());

		  gtag('config', 'G-NNEPT3FZNL');
		</script>
	{% endif %}
  
  {% javascripts filter="handlebars,?jsqueeze" output="js/templates.js"
    '@AppBundle/Resources/public/hbs/*.handlebars'
%}
    <script src="{{ asset_url }}"></script>
  {% endjavascripts %}

  {% javascripts filter="?jsqueeze" output="js/app.js"
    '@AppBundle/Resources/public/js/register-partials.js'
    '@AppBundle/Resources/public/js/bootstrap.js'
	'@AppBundle/Resources/public/js/bootstrap-essentials.js'
	'@AppBundle/Resources/public/js/fdb-all.min.js'
    '@AppBundle/Resources/public/js/jquery.toc.min.js'
    '@AppBundle/Resources/public/js/app.collection.js'
	'@AppBundle/Resources/public/js/app.data.js'
	'@AppBundle/Resources/public/js/app.format.js'
	'@AppBundle/Resources/public/js/app.tip.js'
	'@AppBundle/Resources/public/js/app.card_modal.js'
	'@AppBundle/Resources/public/js/app.user.js'
    '@AppBundle/Resources/public/js/app.binomial.js'
    '@AppBundle/Resources/public/js/app.hypergeometric.js'
    '@AppBundle/Resources/public/js/app.draw_simulator.js'
    '@AppBundle/Resources/public/js/app.textcomplete.js'
    '@AppBundle/Resources/public/js/app.markdown.js'
    '@AppBundle/Resources/public/js/app.smart_filter.js'
    '@AppBundle/Resources/public/js/app.deck.js'
    '@AppBundle/Resources/public/js/app.diff.js'
    '@AppBundle/Resources/public/js/app.deck_history.js'
    '@AppBundle/Resources/public/js/app.deck_charts.js'
	'@AppBundle/Resources/public/js/app.ui.js'
  %}
	  <script src="{{ asset_url }}"></script><!--app!-->
	{% endjavascripts %}

  <script type="text/javascript">
  {% if collection is defined %}
    app.collection && app.collection.init({{ collection|json_encode|raw }});
  {% endif %}
  </script>

	{% block javascripts %}{% endblock %}
	<script src="{{ asset('/bundles/app/highcharts.theme.js') }}"></script>
    <script type="text/javascript" src="//cdn.jsdelivr.net/jquery.dirtyforms/2.0.0/jquery.dirtyforms.min.js"></script>
	<script type="text/javascript">
	$( document ).ready(function() {
	
		function setCookie(name,value,days) {
			var expires = "";
			if (days) {
				var date = new Date();
				date.setTime(date.getTime() + (days*24*60*60*1000));
				expires = "; expires=" + date.toUTCString();
			}
			document.cookie = name + "=" + (value || "")  + expires + "; path=/";
		}
		function getCookie(name) {
			var nameEQ = name + "=";
			var ca = document.cookie.split(';');
			for(var i=0;i < ca.length;i++) {
				var c = ca[i];
				while (c.charAt(0)==' ') c = c.substring(1,c.length);
				if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
			}
			return null;
		}
		function eraseCookie(name) {   
			document.cookie = name+'=; Max-Age=-99999999;';  
		}
	
		$('ul').on('click', 'a#darkmode', function(e) {
			e.preventDefault();
			eraseCookie('lightmode');
			$('#lightmodesheet').attr('href', '/css/app.css');
			$('.lightflippy').css('background-color','#0b1822');
			$('.fa-moon-o').toggleClass('fa-moon-o fa-moon-o');
			$(this).attr('id', 'darkmode');
		});
		
		$('ul').on('click', 'a#lightmode', function(e) {
			e.preventDefault();
			eraseCookie('lightmode');
			$('#lightmodesheet').attr('href', '/css/app.css');
			$('.lightflippy').css('background-color','#0b1822');
			$('.fa-moon-o').toggleClass('fa-moon-o fa-moon-o');
			$(this).attr('id', 'darkmode');
		});
		
	});
	</script>
    </body>
</html>
